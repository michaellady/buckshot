{"id":"buckshot-0fj","content_hash":"0f818eb9840fd370cba2e07e0b5ea09cba1125894c7eb9a226ac0a4df7a1e79b","title":"Implement Send() response timing and integration tests","description":"Session.Send() needs proper timing/synchronization to capture agent output. Current implementation writes to stdin but returns immediately before output is available. Options: 1) Add timeout-based waiting, 2) Parse JSON stream for completion markers, 3) Use proper mocking for tests. Tests marked as skipped: TestSessionSend, TestSessionContextUsage, TestSessionMultipleSends. Discovered from buckshot-h7t.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T04:51:32.120473-08:00","updated_at":"2025-11-26T05:47:35.803403-08:00","closed_at":"2025-11-26T05:47:35.803403-08:00","source_repo":"."}
{"id":"buckshot-0y0","content_hash":"206ca555bdfa297296e463435e17f1f305170da0ae1be8344805ccf706b30d78","title":"RED: Write CLI tests","description":"TDD RED phase: Write failing tests for CLI. Test cases: 1) buckshot plan 'prompt' - run planning protocol, 2) --rounds N flag (default 3), 3) --agents-path flag for AGENTS.md location, 4) --agents flag to select specific agents, 5) buckshot agents - list available agents with status, 6) --until-converged flag to run until no changes, 7) Interactive mode: pause between rounds for user input.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-25T22:20:21.346388-08:00","updated_at":"2025-11-26T05:22:21.783955-08:00","closed_at":"2025-11-26T05:22:21.783955-08:00","source_repo":".","dependencies":[{"issue_id":"buckshot-0y0","depends_on_id":"buckshot-aaj","type":"blocks","created_at":"2025-11-25T22:52:12.196686-08:00","created_by":"daemon"}]}
{"id":"buckshot-1g8","content_hash":"2a6d0580e77a061a2748bdeb691523b7c5188f6ac26f040e710496af91fa3886","title":"RED: Session parser integration tests","description":"Write failing tests for Session using agent's OutputParser. Tests: Session.Send() uses agent.Parser to transform output, parsed output appears in Response.Output, agents without parser return raw output.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T09:50:16.814133-08:00","updated_at":"2025-11-26T10:09:24.633197-08:00","closed_at":"2025-11-26T10:09:24.633197-08:00","source_repo":".","dependencies":[{"issue_id":"buckshot-1g8","depends_on_id":"buckshot-3as","type":"blocks","created_at":"2025-11-26T09:50:16.81723-08:00","created_by":"daemon"}]}
{"id":"buckshot-1oo","content_hash":"d2f6b61ede8cd762437277e30e2be5fb15d3ffe6b10437596e1176b80f4136f3","title":"RED: Write agent session tests","description":"TDD RED phase: Write failing tests for persistent agent sessions. Test cases: 1) Session.Start(agentsPath) initializes agent with AGENTS.md, 2) Session.Send(prompt) returns response, 3) Session.ContextUsage() returns 0.0-1.0, 4) Session.IsAlive() checks if session still active, 5) Session.Close() terminates cleanly. Sessions persist if context \u003c 50%.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-25T22:19:39.699217-08:00","updated_at":"2025-11-25T23:19:27.025505-08:00","closed_at":"2025-11-25T23:19:27.025505-08:00","source_repo":".","dependencies":[{"issue_id":"buckshot-1oo","depends_on_id":"buckshot-vk6","type":"blocks","created_at":"2025-11-25T22:19:39.699715-08:00","created_by":"daemon"},{"issue_id":"buckshot-1oo","depends_on_id":"buckshot-b0y","type":"blocks","created_at":"2025-11-25T22:26:09.422063-08:00","created_by":"daemon"}]}
{"id":"buckshot-3as","content_hash":"d26a08fe947f5aeaaed2064ce13d13176e922291aa84bb3faf0ed9e1a95108ed","title":"GREEN: Implement CodexParser","description":"Implement CodexParser that parses Codex JSON streaming output. Extract: reasoning text from item.text, command outputs from aggregated_output, format as clean readable text with sections for reasoning and command results.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T09:50:12.27975-08:00","updated_at":"2025-11-26T10:04:56.705706-08:00","closed_at":"2025-11-26T10:04:56.705706-08:00","source_repo":".","dependencies":[{"issue_id":"buckshot-3as","depends_on_id":"buckshot-4o3","type":"blocks","created_at":"2025-11-26T09:50:12.280473-08:00","created_by":"daemon"}]}
{"id":"buckshot-3xj","content_hash":"cd04fa286bd5c0e6d13f13eb249d38baa97994843e9776a075af215d6e4babde","title":"RED: Write feedback CLI command tests","description":"Write tests for 'buckshot feedback' command that runs a single agent in comment-only mode:\n- --agent flag to specify which agent to use\n- Agent runs with feedback prompt\n- Only bd comment commands are expected (no bd update/create)\n\nParent: buckshot-7ph\nDepends: buckshot-wu2","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-11-27T18:04:36.434448-08:00","updated_at":"2025-11-27T18:11:20.907112-08:00","source_repo":"."}
{"id":"buckshot-4o3","content_hash":"c41e6a992a2475e12e87fd61d66cf28f79f2477a3bab375206c4686e506cbf42","title":"RED: CodexParser tests","description":"Write failing tests for CodexParser. Tests: parse JSON streaming events, extract reasoning text, extract command output, extract aggregated_output, handle malformed JSON gracefully, handle mixed content.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T09:50:07.462799-08:00","updated_at":"2025-11-26T10:02:47.113236-08:00","closed_at":"2025-11-26T10:02:47.113236-08:00","source_repo":".","dependencies":[{"issue_id":"buckshot-4o3","depends_on_id":"buckshot-fha","type":"blocks","created_at":"2025-11-26T09:50:07.465868-08:00","created_by":"daemon"}]}
{"id":"buckshot-5qe","content_hash":"0f7b5e65438d000115187662159d26a9b117c011b340cffd98da527dd6b5f7d8","title":"GREEN: Implement planning context","description":"TDD GREEN phase: Implement planning context builder. func BuildContext(prompt string, agentsPath string, isFirstAgent bool) string. Includes: 1) Instruction to read AGENTS.md from path, 2) The user's original prompt, 3) Current beads state (bd list + bd show for each), 4) Instructions: create/update/reorganize beads using bd commands, 5) Request: report changes made and whether plan seems complete.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-25T22:20:05.956414-08:00","updated_at":"2025-11-25T23:36:39.386256-08:00","closed_at":"2025-11-25T23:36:39.386256-08:00","source_repo":".","dependencies":[{"issue_id":"buckshot-5qe","depends_on_id":"buckshot-grn","type":"blocks","created_at":"2025-11-25T22:20:05.956894-08:00","created_by":"daemon"}]}
{"id":"buckshot-7ph","content_hash":"7cae1fd0c071b43662401b952213d2573656a48c839b576415caa76c61aa4bd0","title":"Beads planning feedback comment-only mode","description":"Add a feedback mode where agents can only add comments to beads, not modify descriptions or other attributes. Each agent reviews beads and leaves substantive comments. This is the first restricted mode - more permissive modes will be added later.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-11-27T18:04:18.377665-08:00","updated_at":"2025-11-27T18:04:18.377665-08:00","source_repo":"."}
{"id":"buckshot-86u","content_hash":"3d30691498712861a041794c80ae17f639606c61cd362033e15b8522fb8080b6","title":"Store agent perspectives to bead notes","description":"After getting agent perspectives, save them to the bead as notes. Use bd update BEAD-ID --notes to append each agent's response. Format: timestamp, agent name, response summary. Optional: --save flag on buckshot review command to auto-save. This enables the review-and-edit workflow.","status":"closed","priority":4,"issue_type":"task","created_at":"2025-11-25T22:25:49.408074-08:00","updated_at":"2025-11-26T09:30:08.96352-08:00","closed_at":"2025-11-26T09:30:08.96352-08:00","source_repo":".","dependencies":[{"issue_id":"buckshot-86u","depends_on_id":"buckshot-tww","type":"blocks","created_at":"2025-11-25T22:25:49.408597-08:00","created_by":"daemon"}]}
{"id":"buckshot-aaj","content_hash":"65d11c8dff142982dd84c6c06c7812bc1820a9a6de1d28472c601f8acee8f081","title":"GREEN: Implement convergence detection","description":"TDD GREEN phase: Implement convergence detection. func IsConverged(results []RoundResult) bool. Parse agent responses looking for signals: 'no changes', 'plan complete', 'nothing to add'. Also track bead diff between rounds - if no beads created/modified/deleted, that's convergence. Return ConvergenceResult with reason and confidence.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-25T22:52:01.049156-08:00","updated_at":"2025-11-26T05:20:41.209296-08:00","closed_at":"2025-11-26T05:20:41.209296-08:00","source_repo":".","dependencies":[{"issue_id":"buckshot-aaj","depends_on_id":"buckshot-t6t","type":"blocks","created_at":"2025-11-25T22:52:01.04965-08:00","created_by":"daemon"}]}
{"id":"buckshot-b0o","content_hash":"27512c12617ce7800e11efae7f9055b1a859f4a62ed1996c9279d74fab81d30a","title":"Add new agent CLI clients: auggie, codex, cursor-cli, gemini, amp","description":"Add support for auggie, codex, cursor-cli, gemini, and amp agent CLIs as clients in the agent detection system","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-27T17:30:41.20917-08:00","updated_at":"2025-11-27T17:37:58.192728-08:00","closed_at":"2025-11-27T17:37:58.192728-08:00","source_repo":"."}
{"id":"buckshot-b0y","content_hash":"e0e452c2c283fc81ae0ea48f52d88e8e4fcce61afbe40f85033889ced6310e55","title":"Research CLI invocation patterns","description":"Research exactly how to invoke claude, codex, and cursor CLIs. Questions: 1) Claude Code: what flags for non-interactive prompt? (-p? --print? --dangerously-skip-permissions?), 2) Codex: what's the exact invocation pattern?, 3) Cursor: how to invoke cursor CLI for prompts?, 4) Are there authentication checks we can run?, 5) What's the output format (stdout, stderr, exit codes)?, 6) How to track context usage for each? Document findings in code comments or README.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-25T22:25:43.386724-08:00","updated_at":"2025-11-25T23:08:03.661974-08:00","closed_at":"2025-11-25T23:08:03.661974-08:00","source_repo":".","dependencies":[{"issue_id":"buckshot-b0y","depends_on_id":"buckshot-s4r","type":"blocks","created_at":"2025-11-25T22:25:43.387304-08:00","created_by":"daemon"}]}
{"id":"buckshot-byq","content_hash":"8eff79a92d2aefbcf1f52d65060ca13032b00790ef38613b925171f1c8b8b1d3","title":"GREEN: Implement parallel dispatch","description":"TDD GREEN phase: Implement parallel dispatch. func Dispatch(ctx context.Context, agents []Agent, prompt string) []Result. Use sync.WaitGroup or errgroup. Fan-out: spawn goroutine per agent. Fan-in: collect results via channel. Handle context cancellation for timeout. Sort results by agent name for deterministic output.","status":"closed","priority":4,"issue_type":"task","created_at":"2025-11-25T22:19:55.439636-08:00","updated_at":"2025-11-26T09:05:47.654879-08:00","closed_at":"2025-11-26T09:05:47.654879-08:00","source_repo":".","dependencies":[{"issue_id":"buckshot-byq","depends_on_id":"buckshot-hv9","type":"blocks","created_at":"2025-11-25T22:19:55.440129-08:00","created_by":"daemon"}]}
{"id":"buckshot-c1y","content_hash":"0a805b11707067ef3369b2bc0ba916c6ed112697f5822ba946632eca81df843a","title":"GREEN: Implement results presentation","description":"TDD GREEN phase: Implement results presentation. func FormatResults(results []Result, format OutputFormat) string. OutputFormats: Terminal (colored, bordered sections per agent), JSON (structured for piping), Markdown (for saving). Use box-drawing characters for terminal. Include summary (N agents responded, M failed).","status":"closed","priority":4,"issue_type":"task","created_at":"2025-11-25T22:20:16.261823-08:00","updated_at":"2025-11-26T09:14:22.731327-08:00","closed_at":"2025-11-26T09:14:22.731327-08:00","source_repo":".","dependencies":[{"issue_id":"buckshot-c1y","depends_on_id":"buckshot-z1g","type":"blocks","created_at":"2025-11-25T22:20:16.262386-08:00","created_by":"daemon"}]}
{"id":"buckshot-ddf","content_hash":"5362d2b588e49668ebaa64d026090a75df955338e7ad36e556f925ea232e0dcd","title":"Buckshot MVP - Multi-agent bead review system","description":"MVP: Multi-agent planning protocol with Claude Code, Codex, and Cursor. Each round, ALL available agents take turns analyzing prompt + current beads, creating/modifying/reorganizing the plan. Agents persist across rounds if context \u003c 50%. Configurable rounds or until convergence. User can interject anytime. Future Phase 2: Implementation fan-out to parallel git-worktrees with voting.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-25T22:19:13.251435-08:00","updated_at":"2025-11-26T05:27:50.106109-08:00","closed_at":"2025-11-26T05:27:50.106109-08:00","source_repo":"."}
{"id":"buckshot-dnj","content_hash":"5325916701582f5ddd2bbf943198ef72ad1e858de2b92fc631817f2bb43dafb0","title":"Fix session tests - hardcoded agent paths","description":"Session integration tests in internal/session/session_test.go hardcode /usr/bin/claude but real binary is at /opt/homebrew/bin/claude. Options: 1) Use detected paths from Detector, 2) Add test env var override, 3) Implement proper mocking with test doubles. Discovered while implementing buckshot-h7t.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-25T23:35:20.289076-08:00","updated_at":"2025-11-26T04:49:38.177257-08:00","closed_at":"2025-11-26T04:49:38.177257-08:00","source_repo":"."}
{"id":"buckshot-dz0","content_hash":"1b239699114b4d38c13876a2ab5ba622619cee38a839af9c50e930493a92d528","title":"Add e2e tests against real agents","description":"Create end-to-end tests that exercise buckshot against real agent CLIs (Claude, Codex, Cursor) to verify actual integration behavior. Tests should be skippable via build tags or env vars when agents aren't available.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-27T07:25:06.377869-08:00","updated_at":"2025-11-27T07:31:29.974988-08:00","closed_at":"2025-11-27T07:31:29.974988-08:00","source_repo":"."}
{"id":"buckshot-e7d","content_hash":"d85688f0d63631b85467b9defeb151de022cf781bfb0866da5a437e21964367b","title":"RED: Write agent detection tests","description":"TDD RED phase: Write failing tests for agent detection. Test cases: 1) Detect claude CLI presence via which/command -v, 2) Detect codex CLI presence, 3) Detect cursor CLI presence, 4) Check if agent is authenticated/has tokens (try --version or similar), 5) Return list of available agents with status. Tests should fail initially (no implementation yet).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-25T22:19:27.962907-08:00","updated_at":"2025-11-25T23:12:05.639938-08:00","closed_at":"2025-11-25T23:12:05.639938-08:00","source_repo":".","dependencies":[{"issue_id":"buckshot-e7d","depends_on_id":"buckshot-s4r","type":"blocks","created_at":"2025-11-25T22:19:27.963405-08:00","created_by":"daemon"}]}
{"id":"buckshot-fha","content_hash":"4bde99c42a908d8d973439cb5da5b0ac22c4dcc4526e01465b18d2b565fb309d","title":"GREEN: Implement OutputParser interface","description":"Implement OutputParser interface and NoopParser (returns input unchanged). Add Parser field to Agent struct. This is the foundation for agent-specific parsing.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T09:50:02.357805-08:00","updated_at":"2025-11-26T09:59:50.140231-08:00","closed_at":"2025-11-26T09:59:50.140231-08:00","source_repo":".","dependencies":[{"issue_id":"buckshot-fha","depends_on_id":"buckshot-snh","type":"blocks","created_at":"2025-11-26T09:50:02.35924-08:00","created_by":"daemon"}]}
{"id":"buckshot-g0f","content_hash":"314aec14411ba429219b9874d435a391294423dbaee2e15f1ad7a4ea3cdfbfbd","title":"GREEN: Implement round orchestrator","description":"TDD GREEN phase: Implement round orchestrator. func RunRound(sessions []Session, prompt string, agentsPath string) RoundResult. For each agent: 1) Build fresh context with current beads, 2) Send to agent session, 3) Parse response for changes made, 4) Track if agent reported 'no changes needed'. Rebuild context between agents so each sees latest state.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-25T22:51:48.087052-08:00","updated_at":"2025-11-26T05:17:45.765965-08:00","closed_at":"2025-11-26T05:17:45.765965-08:00","source_repo":".","dependencies":[{"issue_id":"buckshot-g0f","depends_on_id":"buckshot-lzr","type":"blocks","created_at":"2025-11-25T22:51:48.087605-08:00","created_by":"daemon"}]}
{"id":"buckshot-grn","content_hash":"07fb5b51808bc3997973c56e26db9f61d76c57e01a46ed3933dce11bfa33262f","title":"RED: Write planning context tests","description":"TDD RED phase: Write failing tests for planning context builder. Test cases: 1) BuildContext(prompt, agentsPath) creates initial prompt with AGENTS.md path, 2) BuildContext includes 'bd list' output showing current beads, 3) BuildContext includes 'bd show' for each bead with details, 4) Format is clear for LLM consumption, 5) Include instructions for how agent should modify beads.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-25T22:20:00.87862-08:00","updated_at":"2025-11-25T23:21:45.122948-08:00","closed_at":"2025-11-25T23:21:45.122948-08:00","source_repo":".","dependencies":[{"issue_id":"buckshot-grn","depends_on_id":"buckshot-s4r","type":"blocks","created_at":"2025-11-25T22:26:09.331775-08:00","created_by":"daemon"}]}
{"id":"buckshot-h7t","content_hash":"34cfd31424df9ebc3103f7062f4f86fb111bb0c99e6f95bea4257cd62cad2dc1","title":"GREEN: Implement agent sessions","description":"TDD GREEN phase: Implement persistent agent sessions. type Session interface { Start(agentsPath string) error; Send(prompt string) (Response, error); ContextUsage() float64; IsAlive() bool; Close() error }. Implement: ClaudeSession (claude CLI), CodexSession (codex CLI), CursorSession (cursor CLI). Track context via output parsing or API. Respawn session if context \u003e 50%.","notes":"All tests pass (3 skipped for integration). Session lifecycle (Start/IsAlive/Close) working. Send() timing fix deferred to buckshot-0fj. Ready for review and merge.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-25T22:19:46.044343-08:00","updated_at":"2025-11-26T04:51:58.591717-08:00","closed_at":"2025-11-26T04:51:58.591717-08:00","source_repo":".","dependencies":[{"issue_id":"buckshot-h7t","depends_on_id":"buckshot-1oo","type":"blocks","created_at":"2025-11-25T22:19:46.044846-08:00","created_by":"daemon"}]}
{"id":"buckshot-hv9","content_hash":"4cbedb671ce5d84fb8373dc18bf8c9e13614b90087e502360e5384b2a6699f7a","title":"RED: Write parallel dispatch tests","description":"TDD RED phase: Write failing tests for parallel dispatch. Test cases: 1) Dispatch to multiple agents concurrently using goroutines, 2) Collect all results via channel, 3) Handle partial failures (some agents fail, others succeed), 4) Respect overall timeout, 5) Return results in consistent order. Use mock agents for testing.","status":"closed","priority":4,"issue_type":"task","created_at":"2025-11-25T22:19:50.75105-08:00","updated_at":"2025-11-26T06:38:06.934705-08:00","closed_at":"2025-11-26T06:38:06.934705-08:00","source_repo":".","dependencies":[{"issue_id":"buckshot-hv9","depends_on_id":"buckshot-h7t","type":"blocks","created_at":"2025-11-25T22:19:50.751545-08:00","created_by":"daemon"}]}
{"id":"buckshot-j1e","content_hash":"eadec2ee311faeaf70df7b3fd8502adac2e113bee175e9b3bbbd945219d958c0","title":"Parse agent output formats for clean notes","description":"Codex returns JSON streaming events. Add OutputParser interface to agent package so each agent can parse its own output format into clean text for notes.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-26T09:49:51.572131-08:00","updated_at":"2025-11-26T10:15:17.396655-08:00","closed_at":"2025-11-26T10:15:17.396655-08:00","source_repo":"."}
{"id":"buckshot-ldc","content_hash":"b2822581887066f239f970cc6acecaad9b326ef8d46f23b93a144100cb2cd32d","title":"GREEN: Integrate parser into Session","description":"Modify Session.Send() to use agent.Parser.Parse() on output before returning Response. If parser is nil, return raw output. Update detector to assign CodexParser to codex agent.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T09:50:21.309251-08:00","updated_at":"2025-11-26T10:11:58.431125-08:00","closed_at":"2025-11-26T10:11:58.431125-08:00","source_repo":".","dependencies":[{"issue_id":"buckshot-ldc","depends_on_id":"buckshot-1g8","type":"blocks","created_at":"2025-11-26T09:50:21.310063-08:00","created_by":"daemon"}]}
{"id":"buckshot-lzr","content_hash":"f5f324a93f095cdc8f9457fd206f82be874ea483a2f3bd239276e89c835deab2","title":"RED: Write round orchestrator tests","description":"TDD RED phase: Write failing tests for round orchestrator. Test cases: 1) RunRound(agents, context) executes each agent in sequence, 2) Each agent sees beads state AFTER previous agents in same round, 3) Tracks changes made by each agent, 4) Handles agent failures gracefully (skip, continue with others), 5) Returns RoundResult with per-agent summaries and total changes.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-25T22:51:42.163068-08:00","updated_at":"2025-11-26T04:54:44.574561-08:00","closed_at":"2025-11-26T04:54:44.574561-08:00","source_repo":".","dependencies":[{"issue_id":"buckshot-lzr","depends_on_id":"buckshot-h7t","type":"blocks","created_at":"2025-11-25T22:51:42.163576-08:00","created_by":"daemon"},{"issue_id":"buckshot-lzr","depends_on_id":"buckshot-5qe","type":"blocks","created_at":"2025-11-25T22:51:42.164063-08:00","created_by":"daemon"}]}
{"id":"buckshot-mzm","content_hash":"4a3e5db5a3a9ba79b4620e9ecd6a870f3f4d8f64559dea73f57dbd601b258f64","title":"RED: Write FeedbackContext builder tests","description":"Write tests for FeedbackContext builder that formats the comment-only prompt. Tests should verify:\n1. Prompt includes instruction to only add comments\n2. Prompt includes agent CLI name as author\n3. Prompt tells agent NOT to modify descriptions\n4. Beads state is included\n5. AGENTS.md path is included\n\nParent: buckshot-7ph","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-27T18:04:25.045727-08:00","updated_at":"2025-11-27T18:06:16.021854-08:00","closed_at":"2025-11-27T18:06:16.021854-08:00","source_repo":"."}
{"id":"buckshot-pxv","content_hash":"6463c4defbd96c9df792c821432ef0b0f0386fa588d11f7a5c8faf54a4766a83","title":"Comprehensive CLI test plan","description":"Test plan covering: (1) End-to-end integration with mock agents, (2) Error handling, (3) Edge cases, (4) Output format validation, (5) Exit codes, (6) Help/docs, (7) Signal handling, (8) Parser integration. Priority: Phase 1 = E2E + errors + parser integration, Phase 2 = edge cases + output + exit codes, Phase 3 = help + signals. Needs mock agent binary infrastructure.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T10:20:30.638913-08:00","updated_at":"2025-11-27T05:40:07.882649-08:00","closed_at":"2025-11-27T05:40:07.882649-08:00","source_repo":"."}
{"id":"buckshot-rdb","content_hash":"3417559ddaf40497d4832a6cd1e07f1f806d6a753145ab87295e933fd578286e","title":"GREEN: Implement feedback CLI command","description":"Implement 'buckshot feedback' command:\n- --agent flag (required) to specify single agent\n- Runs agent with FeedbackContext\n- Uses bd comment with --author set to agent name\n- Single agent, single run (no rounds yet)\n\nParent: buckshot-7ph\nDepends: buckshot-3xj","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-27T18:04:41.460981-08:00","updated_at":"2025-11-27T18:04:41.460981-08:00","source_repo":"."}
{"id":"buckshot-rpq","content_hash":"a739a6c64950a5b8c057908a341b48785fad20996b28b23ecaff89a1c6fdea0c","title":"Test planning run","description":"Testing the buckshot multi-agent planning system","notes":"## Round 1\n\n### codex @ 2025-11-26 09:46:44\n{\"type\":\"thread.started\",\"thread_id\":\"019ac142-9a7e-72f0-925c-1c879090a620\"}\n{\"type\":\"turn.started\"}\n{\"type\":\"item.completed\",\"item\":{\"id\":\"item_0\",\"type\":\"reasoning\",\"text\":\"**Opening file**\"}}\n{\"type\":\"item.started\",\"item\":{\"id\":\"item_1\",\"type\":\"command_execution\",\"command\":\"bash -lc 'cat /Users/mikelady/dev/AGENTS/AGENTS.md'\",\"aggregated_output\":\"\",\"status\":\"in_progress\"}}\n{\"type\":\"item.completed\",\"item\":{\"id\":\"item_1\",\"type\":\"command_execution\",\"command\":\"bash -lc 'cat /Users/mikelady/dev/AGENTS/AGENTS.md'\",\"aggregated_output\":\"# Agent Rules \u0026 Guidelines\\n\\nThis document contains the rules and guidelines for Claude agents.\\n\\n## BEFORE ANYTHING ELSE\\n\\n**When starting work in a new repository, run:**\\n```bash\\nbd onboard\\n```\\n\\nFollow the instructions provided. If the repository already has a `.beads/` directory and this document includes bd workflow information, onboarding is complete and you can skip this step.\\n\\n## ‚ö†Ô∏è CRITICAL: Commit Message Format\\n\\n**üö® ALWAYS USE SINGLE-LINE COMMIT MESSAGES üö®**\\n\\n```bash\\n# ‚úÖ CORRECT - Single line only\\ngit commit -m \\\"Add authentication middleware\\\"\\n\\n# ‚ùå WRONG - Multi-line, no heredoc needed\\ngit commit -m \\\"$(cat \u003c\u003c'EOF'\\nAdd authentication middleware\\n...\\nEOF\\n)\\\"\\n```\\n\\n**Why?** Git hook automatically adds JIRA ID from branch name:\\n- You write: `\\\"Add authentication middleware\\\"`\\n- Hook transforms to: `\\\"DAX-1234: Add authentication middleware\\\"`\\n\\n**No heredoc. No multi-line. Just single line descriptions.**\\n\\n## Rule 1: Permission Configuration\\n\\n**All Bash commands are allowed. `rm` commands require user approval.**\\n\\n‚úÖ **Allowed:** All Bash commands except `rm`\\n‚ö†Ô∏è **Requires Approval:** Any command starting with `rm`\\n\\n---\\n\\n## Rule 2: Issue Tracking with bd (beads)\\n\\n**IMPORTANT**: This project uses **bd (beads)** for ALL issue tracking. Do NOT use markdown TODOs, task lists, or other tracking methods.\\n\\n### Why bd?\\n\\n- Dependency-aware: Track blockers and relationships between issues\\n- Git-friendly: Auto-syncs to JSONL for version control\\n- Agent-optimized: JSON output, ready work detection, discovered-from links\\n- Prevents duplicate tracking systems and confusion\\n- **Your documentation system**: Use beads for architecture decisions, design notes, and intermediate findings\\n\\n### ‚ö†Ô∏è CRITICAL: Never Use TODO Comments or Lists\\n\\n**üö® FOR AI AGENTS: DO NOT USE TodoWrite üö®**\\n\\n**AI agents must NEVER use the TodoWrite tool.** All task tracking, planning, and work breakdown must be done exclusively in beads using `bd create`. No exceptions.\\n\\n- ‚ùå **NEVER** use TodoWrite for \\\"breaking down complex work\\\"\\n- ‚ùå **NEVER** use TodoWrite for \\\"planning implementation steps\\\"\\n- ‚ùå **NEVER** use TodoWrite for \\\"tracking progress\\\"\\n- ‚úÖ **ALWAYS** create beads for every task, sub-task, and work item\\n- ‚úÖ **ALWAYS** use `bd create` with proper priorities and dependencies\\n\\n**Why TodoWrite is prohibited for agents:**\\n- Creates parallel tracking systems that diverge from beads\\n- Work in TodoWrite is ephemeral and lost between sessions\\n- Bypasses dependency tracking and priority management\\n- Invisible to project stakeholders and other tools\\n- Defeats the entire purpose of using beads for centralized tracking\\n\\n---\\n\\n**ALSO ABSOLUTELY PROHIBITED:**\\n- ‚ùå TODO comments in code (`// TODO: fix this`)\\n- ‚ùå Markdown TODO lists (`- [ ] Task`)\\n- ‚ùå FIXME or XXX comments\\n- ‚ùå Any inline task tracking in code or documentation\\n\\n**Why this matters:**\\n- TODOs create invisible, untracked work that gets forgotten\\n- They bypass dependency tracking and priority management\\n- They fragment tracking across multiple systems\\n- They're invisible to `bd ready` and other tooling\\n- They create technical debt that never gets addressed\\n\\n**Instead, ALWAYS:**\\n```bash\\n# Found something that needs work? Create a bead immediately:\\nbd create \\\"Fix error handling in parseConfig\\\" -t bug -p 1 -d \\\"Found while working on PARENT-ID\\\"\\n\\n# Need to track follow-up work? Use discovered-from:\\nbd create \\\"Refactor auth module\\\" -p 2 --deps discovered-from:AGENTS-42\\n\\n# Breaking down complex work? Create sub-tasks as beads:\\nbd create \\\"Implement auth middleware - step 1: JWT validation\\\" -t task -p 1\\nbd create \\\"Implement auth middleware - step 2: Session management\\\" -t task -p 1\\n```\\n\\n**The rule is simple:** If it needs to be done, it goes in beads. No exceptions.\\n\\n### Database Initialization\\n\\n**If `.beads/` directory doesn't exist, initialize:**\\n```bash\\nbd init\\n```\\n\\n**Verify you're using the LOCAL repository database:**\\n```bash\\n# Check if local .beads directory exists\\nls -la .beads 2\u003e/dev/null \u0026\u0026 echo \\\"‚úì Using local database\\\" || echo \\\"‚ö† No local database found\\\"\\n\\n# Verify issues use the repository's prefix\\nbd list | head -3\\n```\\n\\n**Common issue:** Using a global beads database instead of repository-specific one. Solution: Run `bd init` in the repository root.\\n\\n### Quick Reference\\n\\n**Check for ready work:**\\n```bash\\nbd ready                        # Show unblocked issues\\nbd ready --json                 # JSON output for programmatic use\\n```\\n\\n**Create issues:**\\n```bash\\nbd create \\\"Issue title\\\" -t bug|feature|task|epic|chore -p 0-4 -d \\\"Description\\\"\\nbd create \\\"Found bug\\\" -p 1 --deps discovered-from:PARENT-ID    # Link discovered work\\n```\\n\\n**Issue Types:** `bug`, `feature`, `task`, `epic`, `chore`\\n**Priorities:** `0` (critical) ‚Üí `4` (backlog), default: `2`\\n\\n**Update and claim:**\\n```bash\\nbd update ISSUE-ID --status in_progress    # Claim work\\nbd update ISSUE-ID --priority 1            # Change priority\\nbd update ISSUE-ID --notes \\\"Additional details\\\"\\n```\\n\\n**Statuses:** `open`, `in_progress`, `blocked`, `closed`\\n\\n**Complete work:**\\n```bash\\nbd close ISSUE-ID --reason \\\"Completed\\\"\\n```\\n\\n**View issues:**\\n```bash\\nbd list                  # All issues\\nbd list -s open          # Filter by status\\nbd show ISSUE-ID         # Show details\\n```\\n\\n**Note:** Add `--json` flag to any command when you need JSON output for programmatic parsing.\\n\\n### Workflow for AI Agents\\n\\n1. **Check ready work**: `bd ready` shows unblocked issues\\n2. **Claim your task**: `bd update ISSUE-ID --status in_progress`\\n3. **Work on it**: Implement, test, document\\n4. **Discover new work?** Create linked issue:\\n   - `bd create \\\"Found bug\\\" -p 1 --deps discovered-from:PARENT-ID`\\n5. **Complete**: `bd close ISSUE-ID --reason \\\"Done\\\"`\\n6. **Commit together**: Always commit `.beads/issues.jsonl` with code changes to keep issue state in sync\\n\\n**Note:** Use `--json` flag when you need structured output for parsing (e.g., `bd ready --json`).\\n\\n### Workflow Example\\n```bash\\n# Check what's ready to work on\\nbd ready\\n\\n# Create and start work\\nbd create \\\"Implement user auth\\\" -t feature -p 1 -d \\\"Add JWT-based auth system\\\"\\nbd update AGENTS-42 --status in_progress\\n\\n# Add notes as you work\\nbd update AGENTS-42 --notes \\\"Implemented login endpoint, testing logout\\\"\\n\\n# Close when complete\\nbd close AGENTS-42 --reason \\\"JWT auth with login/logout endpoints working\\\"\\n```\\n\\n### What to Track in Beads\\nDocument EVERYTHING in beads using issue descriptions and notes:\\n- **Architecture decisions and design notes**\\n- **Research findings and technical investigations**\\n- **Intermediate documentation and work progress**\\n- Test results and fixes applied\\n- Build outputs and deployment info\\n- Bug investigations and resolutions\\n- Configuration changes and their impact\\n- Implementation details and code explanations\\n- Meeting notes and discussion points\\n- Any information you would normally put in a markdown file\\n\\n### Managing AI-Generated Planning Documents\\n\\nAI assistants often create planning and design documents during development. **Use a dedicated directory for these ephemeral files:**\\n\\n**Recommended approach:**\\n- Create a `history/` directory in the project root\\n- Store ALL AI-generated planning/design docs in `history/`\\n- Keep the repository root clean and focused on permanent project files\\n- Only access `history/` when explicitly asked to review past planning\\n\\n**Files to store in history/:**\\n- `PLAN.md`, `IMPLEMENTATION.md`, `ARCHITECTURE.md`\\n- `DESIGN.md`, `CODEBASE_SUMMARY.md`, `INTEGRATION_PLAN.md`\\n- `TESTING_GUIDE.md`, `TECHNICAL_DESIGN.md`, and similar files\\n\\n**For work tracking and intermediate documentation:** Use `bd update ISSUE-ID --notes \\\"Your documentation here\\\"`\\n\\n**Benefits:**\\n- ‚úÖ Clean repository root\\n- ‚úÖ Clear separation between ephemeral and permanent documentation\\n- ‚úÖ Preserves planning history for archaeological research\\n- ‚úÖ Reduces noise when browsing the project\\n\\n### Project Documentation\\n\\n**All permanent project documentation belongs in README.md - do NOT create separate documentation files.**\\n\\n**README.md is the single source of truth for:**\\n- Project overview and purpose\\n- Installation and setup instructions\\n- Usage examples and API documentation\\n- Configuration options\\n- Contributing guidelines\\n- Architecture and design decisions (permanent, not ephemeral)\\n- Troubleshooting and FAQ\\n\\n**DO NOT create these files:**\\n- `CONTRIBUTING.md` - add to README.md ## Contributing section\\n- `INSTALL.md` - add to README.md ## Installation section\\n- `USAGE.md` - add to README.md ## Usage section\\n- `API.md` - add to README.md ## API section\\n- `CONFIGURATION.md` - add to README.md ## Configuration section\\n- `TROUBLESHOOTING.md` - add to README.md ## Troubleshooting section\\n- `FAQ.md` - add to README.md ## FAQ section\\n- `ARCHITECTURE.md` (permanent) - add to README.md ## Architecture section\\n\\n**Exception:** Standard repository files like `LICENSE`, `CHANGELOG.md`, `CODE_OF_CONDUCT.md`, and language-specific files (e.g., `package.json`, `go.mod`) are acceptable.\\n\\n**Why consolidate in README.md?**\\n- ‚úÖ Single place to find all project information\\n- ‚úÖ Easier to maintain (one file vs. many)\\n- ‚úÖ Better discoverability for new contributors\\n- ‚úÖ Reduces documentation fragmentation\\n- ‚úÖ Forces concise, well-organized documentation\\n\\n**If README.md becomes too long:**\\n- Use clear section headers with table of contents\\n- Consider if the project is too complex\\n- Break into multiple repositories if needed\\n- But still keep each repo's docs in its README.md\\n\\n### Auto-Sync with Git\\n\\nbd automatically syncs with git:\\n- Exports to `.beads/issues.jsonl` after changes (5s debounce)\\n- Imports from JSONL when newer (e.g., after `git pull`)\\n- No manual export/import needed!\\n- **Always commit `.beads/issues.jsonl` together with code changes** to keep issue state in sync\\n\\n### Planning Strategy\\n\\nWhen planning work with beads (especially for epics and features):\\n\\n**Focus on the critical path to a Minimum Viable Testable (MVT) project:**\\n- Identify the smallest set of features needed to test the core functionality\\n- Break down work into incremental, testable milestones\\n- Prioritize tasks that unblock testing and validation\\n- Defer nice-to-haves and optimizations until after MVT is working\\n\\n**Example Planning Approach:**\\n```bash\\n# Create epic for overall feature\\nbd create \\\"User Authentication System\\\" -t epic -p 1 -d \\\"MVT: Basic login/logout with session management\\\"\\n\\n# Create critical path tasks\\nbd create \\\"Database schema for users table\\\" -t task -p 1 -d \\\"Required for MVT\\\"\\nbd create \\\"Login endpoint with session creation\\\" -t task -p 1 -d \\\"Core MVT functionality\\\"\\nbd create \\\"Logout endpoint\\\" -t task -p 1 -d \\\"Core MVT functionality\\\"\\nbd create \\\"Basic auth middleware\\\" -t task -p 1 -d \\\"Required to test protected routes\\\"\\n\\n# Defer non-critical items\\nbd create \\\"Password reset flow\\\" -t feature -p 2 -d \\\"Post-MVT enhancement\\\"\\nbd create \\\"OAuth integration\\\" -t feature -p 3 -d \\\"Post-MVT enhancement\\\"\\n```\\n\\n**Key principle:** Get to a testable state as quickly as possible, then iterate.\\n\\n### Test-Driven Development\\n**Write automated tests BEFORE implementation whenever possible:**\\n- Tests provide a clear target for what \\\"done\\\" looks like\\n- Tests give you something concrete to iterate against\\n- Failing tests guide implementation and catch regressions\\n- Tests document expected behavior\\n\\n**Recommended workflow:**\\n```bash\\n# 1. Create the task\\nbd create \\\"Add user login endpoint\\\" -t task -p 1 -d \\\"POST /login with email/password\\\"\\n\\n# 2. Write the test first (it will fail)\\n# Create test file with expected behavior\\n\\n# 3. Run tests to confirm they fail\\n# This validates the test is actually testing something\\n\\n# 4. Implement the feature\\n# Write code until tests pass\\n\\n# 5. Commit when tests pass\\ngit add . \u0026\u0026 git commit -m \\\"Add user login endpoint with tests\\\"\\n```\\n\\n**Benefits:**\\n- Clear definition of done (tests pass)\\n- Confidence when refactoring\\n- Prevents breaking existing functionality\\n- Faster iteration cycles\\n\\n### Code Coverage Tracking\\n\\n**Set up code coverage tracking on all projects wherever possible.**\\n\\nCode coverage helps agents understand which code paths are tested and which need attention.\\n\\n**Setup by language:**\\n\\n```bash\\n# Go\\ngo test -coverprofile=coverage.out ./...\\ngo tool cover -html=coverage.out -o coverage.html\\n\\n# TypeScript/JavaScript (Jest)\\njest --coverage\\n\\n# Python (pytest)\\npytest --cov=src --cov-report=html\\n\\n# Rust\\ncargo tarpaulin --out Html\\n```\\n\\n**Configuration files to add:**\\n\\n```yaml\\n# For Go: Add to Makefile or CI\\ncoverage:\\n\\tgo test -coverprofile=coverage.out ./...\\n\\tgo tool cover -func=coverage.out\\n\\n# For TypeScript: Add to package.json\\n\\\"scripts\\\": {\\n  \\\"test:coverage\\\": \\\"jest --coverage\\\"\\n}\\n\\\"jest\\\": {\\n  \\\"coverageThreshold\\\": {\\n    \\\"global\\\": { \\\"lines\\\": 80 }\\n  }\\n}\\n\\n# For Python: Add to pyproject.toml\\n[tool.pytest.ini_options]\\naddopts = \\\"--cov=src --cov-report=term-missing\\\"\\n\\n[tool.coverage.run]\\nbranch = true\\n```\\n\\n**Coverage targets:**\\n- **New projects**: Aim for 80%+ line coverage from the start\\n- **Existing projects**: Don't decrease coverage when adding code\\n- **Critical paths**: 100% coverage for authentication, payments, data validation\\n\\n**CI Integration:**\\n- Add coverage reporting to CI/CD pipeline\\n- Fail builds if coverage drops below threshold\\n- Use coverage badges in README for visibility\\n\\n**Why coverage matters for agents:**\\n- Identifies untested code paths before they become bugs\\n- Guides where to add tests when modifying existing code\\n- Provides confidence metric for refactoring\\n- Makes \\\"is this tested?\\\" an answerable question\\n\\n### Important Rules\\n\\n- ‚úÖ Use bd for ALL task tracking\\n- ‚úÖ Use `--json` flag for programmatic parsing when needed\\n- ‚úÖ Link discovered work with `--deps discovered-from:PARENT-ID`\\n- ‚úÖ Check `bd ready` before asking \\\"what should I work on?\\\"\\n- ‚úÖ Store AI planning docs in `history/` directory\\n- ‚úÖ Keep ALL project documentation in README.md (single source of truth)\\n- ‚úÖ Commit `.beads/issues.jsonl` together with code changes\\n- ‚úÖ ALWAYS use feature branch + PR workflow, even for tiny changes\\n- ‚ùå Do NOT create markdown TODO lists\\n- ‚ùå Do NOT use external issue trackers\\n- ‚ùå Do NOT duplicate tracking systems\\n- ‚ùå Do NOT clutter repo root with planning documents\\n- ‚ùå Do NOT create separate documentation files (CONTRIBUTING.md, INSTALL.md, etc.)\\n- ‚ùå NEVER commit or push directly to main/master\\n\\n---\\n\\n## Rule 3: Git Branch Strategy\\n\\n**CRITICAL: NEVER commit or push directly to main/master. ALL changes, no matter how small, must go through a feature branch and pull request.**\\n\\n**Create a new git branch for each bead issue.**\\n\\n### Branch Naming\\n- **Format:** `[issue-id]` (e.g., `AGENTS-42`, `site-abc`)\\n- Always branch from `main` unless specified otherwise\\n- **NEVER push directly to main/master** - all changes must go through a feature branch and PR\\n- This applies to ALL changes: bug fixes, typos, documentation updates, everything\\n\\n### Workflow\\n```bash\\n# Start work on issue\\ngit checkout main\\ngit checkout -b site-abc\\nbd update site-abc -s in_progress\\n\\n# Make changes and commit\\ngit add .\\ngit commit -m \\\"Implement feature (site-abc)\\\"\\n\\n# Push to remote feature branch\\ngit push -u origin site-abc\\n\\n# Close the bead when done\\nbd close site-abc -r \\\"Feature complete and tested\\\"\\n```\\n\\n### Default Behavior\\n\\n**ALL work must go through the branch + PR workflow. No exceptions for \\\"small changes\\\" or \\\"quick fixes\\\".**\\n\\nWhen completing work on a bead branch:\\n1. ‚úÖ Commit all changes with descriptive messages\\n2. ‚úÖ Push commits to the remote feature branch\\n3. ‚úÖ Close the bead issue with `bd close [issue-id] -r \\\"reason\\\"`\\n4. ‚úÖ Open a pull request with `gh pr create`\\n5. ‚úÖ Monitor PR checks with `gh pr checks` and ensure they pass\\n6. ‚úÖ If checks fail, fix the issues and push additional commits\\n7. ‚úÖ Once all checks pass, ask the user to review the PR\\n8. ‚úÖ Leave the branch for review (do NOT merge to main yourself)\\n\\n**DO NOT automatically merge to main unless in greenfield mode (see below).**\\n\\n**CRITICAL: After completing work on a bead branch, ALWAYS open a PR, ensure all checks pass, and ask the user to review it before merging. This applies to ALL changes, even single-line fixes.**\\n\\n### Greenfield Mode\\nWhen working in \\\"greenfield mode\\\" (new projects with no review process), agents MAY merge directly to main:\\n\\n```bash\\n# After closing the bead\\nbd close site-abc -r \\\"Feature complete and tested\\\"\\ngit checkout main\\ngit merge site-abc\\ngit branch -d site-abc\\n```\\n\\n**Only use greenfield mode auto-merge when explicitly instructed by the user.**\\n\\n### Pull Request Guidelines\\nWhen creating or working with pull requests:\\n- Always wait for all CI/CD checks to pass before merging\\n- Do NOT merge PRs with failing tests, linting errors, or other check failures\\n- If checks fail, fix the issues and push additional commits to the feature branch\\n- Use `gh pr checks` to monitor the status of PR checks\\n- **NEVER squash commits** - preserve git history by keeping all commits intact\\n- Use regular merge (not squash merge or rebase merge) to maintain full commit history\\n- After PR is merged, delete the feature branch both locally and remotely:\\n  ```bash\\n  git branch -d [issue-id]\\n  git push origin --delete [issue-id]\\n  ```\\n\\n---\\n\\n## Rule 4: User Review Before Execution\\n\\n**Request user approval before executing work on any bead issue.**\\n\\n**Request user approval before installing any dependencies, packages, or libraries.**\\n\\n### Plan Format\\n```\\nReady to work on [issue-id]: [Title]\\n\\nProblem: [description]\\n\\nPlan:\\n- [bullet points of what will be done]\\n\\nFiles to modify: [list]\\nEstimated time: [time estimate]\\nRisk level: [Low/Medium/High]\\n\\nProceed? [Yes/No]\\n```\\n\\n**IMPORTANT:** Wait for explicit user approval before proceeding. Do NOT execute without \\\"Yes\\\".\\n\\n### Dependencies Request Format\\nIf your implementation requires new dependencies, list them for approval:\\n```\\nDependencies needed for [issue-id]:\\n\\n- [package-name] ([version]): [reason for needing it]\\n- [package-name] ([version]): [reason for needing it]\\n\\nInstall command: [e.g., npm install, pip install, go get, brew install]\\n\\nApprove installation? [Yes/No]\\n```\\n\\n**IMPORTANT:** Do NOT install dependencies without explicit approval.\\n\\n### Dependency Version Policy\\n**When adding new dependencies to a project, always use the latest stable version available.**\\n\\nThis ensures:\\n- Access to the newest features and improvements\\n- Latest security patches and bug fixes\\n- Reduced technical debt from outdated dependencies\\n- Better long-term compatibility and support\\n\\nCheck the package registry (npm, PyPI, crates.io, etc.) for the most recent stable release before installation.\\n\\n---\\n\\n## Rule 5: Context Usage Reporting\\n\\n**Report context usage percentage after every response.**\\n\\n### Format\\n```\\n---\\nContext: XX% used (USED/BUDGET tokens)\\n```\\n\\n### Example\\n```\\n---\\nContext: 15% used (29368/200000 tokens)\\n```\\n\\n---\\n\\n## Rule 6: Git Commit on Every Change\\n\\n**Create a git commit after every file change or set of related changes in a git repository.**\\n\\n### Commit Requirements\\n- Always commit after modifying, creating, or deleting files\\n- **Always include `.beads/issues.jsonl` in commits** - beads database changes must be committed with related code changes\\n- Write clear, descriptive commit messages\\n- Follow the repository's existing commit message style\\n- Include the issue ID in the commit message when working on a bead issue\\n\\n### Commit Message Format\\n```\\n[Brief description of change] ([issue-id])\\n\\nü§ñ Generated with [Claude Code](https://claude.com/claude-code)\\n\\nCo-Authored-By: Claude \u003cnoreply@anthropic.com\u003e\\n```\\n\\n### Workflow\\n```bash\\n# After making changes\\ngit add .\\ngit commit -m \\\"$(cat \u003c\u003c'EOF'\\nAdd user authentication endpoint (site-abc)\\n\\nü§ñ Generated with [Claude Code](https://claude.com/claude-code)\\n\\nCo-Authored-By: Claude \u003cnoreply@anthropic.com\u003e\\nEOF\\n)\\\"\\n```\\n\\n### Push Policy\\n- **Main/Master branches:** Do NOT push unless explicitly requested by the user\\n- **Feature branches:** Automatically push commits to keep remote branch updated\\n- Check current branch before pushing: `git branch --show-current`\\n\\n```bash\\n# After committing, push if on feature branch\\nBRANCH=$(git branch --show-current)\\nif [[ \\\"$BRANCH\\\" != \\\"main\\\" \u0026\u0026 \\\"$BRANCH\\\" != \\\"master\\\" ]]; then\\n  git push -u origin \\\"$BRANCH\\\"\\nfi\\n```\\n\\n---\\n\\n## Rule 7: Monitoring with Exponential Backoff\\n\\n**When asked to monitor a process, use exponential backoff to avoid excessive polling.**\\n\\n### When to Use\\n- Monitoring CI/CD pipeline status (e.g., `gh pr checks`)\\n- Waiting for build completion\\n- Watching for deployment status changes\\n- Any long-running process that requires periodic checking\\n\\n### Backoff Strategy\\n```\\nInitial delay: 5 seconds\\nMultiplier: 2x\\nMaximum delay: 60 seconds\\nMaximum duration: 10 minutes (or until user interrupts)\\n```\\n\\n### Example Sequence\\n```\\nCheck 1: immediate\\nCheck 2: wait 5s\\nCheck 3: wait 10s\\nCheck 4: wait 20s\\nCheck 5: wait 40s\\nCheck 6+: wait 60s (capped)\\n```\\n\\n### Implementation\\n```bash\\n# Example: Monitor PR checks with exponential backoff\\ndelay=5\\nmax_delay=60\\nwhile true; do\\n  gh pr checks --watch 2\u003e/dev/null \u0026\u0026 break\\n  echo \\\"Checks still running, waiting ${delay}s...\\\"\\n  sleep $delay\\n  delay=$((delay * 2))\\n  [[ $delay -gt $max_delay ]] \u0026\u0026 delay=$max_delay\\ndone\\n```\\n\\n### Running as Background Process\\n\\n**Always run monitoring as a background process** to allow continued work while waiting:\\n\\n```bash\\n# Start monitoring in background using Bash tool with run_in_background=true\\n# This frees up the agent to continue other work while monitoring\\n\\n# Check output periodically using BashOutput tool\\n# Use exponential backoff when polling for results\\n```\\n\\n**Agent workflow:**\\n1. Start monitor using Bash with `run_in_background: true`\\n2. Continue with other tasks or inform user of wait\\n3. Poll for results using BashOutput with exponential backoff\\n4. Report status when monitoring completes or user interrupts\\n\\n### Benefits\\n- Reduces API rate limit consumption\\n- Minimizes unnecessary output noise\\n- Respects external service resources\\n- Still provides timely feedback when status changes\\n\\n---\\n\\n## Rule 8: Parallel Work with Git Worktrees\\n\\n**When multiple agents work in parallel, each agent MUST use a separate git-worktree for isolation.**\\n\\n### Why Worktrees?\\n- Prevents file conflicts between parallel agents\\n- Each agent has isolated working directory\\n- Agents can work on different branches simultaneously\\n- No need to stash/unstash or context switch\\n\\n### Setup for Parallel Work\\n\\n```bash\\n# Create worktree for a specific issue (from main repo)\\ngit worktree add ../REPO-AGENTS-xyz AGENTS-xyz\\n\\n# Or create worktree with new branch\\ngit worktree add ../REPO-AGENTS-xyz -b AGENTS-xyz main\\n```\\n\\n### Naming Convention\\n```\\n../REPO-ISSUE-ID\\n```\\nExample: If repo is `myapp` and issue is `AGENTS-42`:\\n```\\n../myapp-AGENTS-42\\n```\\n\\n### Agent Workflow for Parallel Work\\n\\n1. **Orchestrator creates worktrees** before spawning parallel agents:\\n   ```bash\\n   # Create worktrees for each parallel task\\n   git worktree add ../myapp-AGENTS-42 -b AGENTS-42 main\\n   git worktree add ../myapp-AGENTS-43 -b AGENTS-43 main\\n   ```\\n\\n2. **Each agent works in its own worktree**:\\n   ```bash\\n   cd ../myapp-AGENTS-42\\n   # Agent works here in isolation\\n   ```\\n\\n3. **Agents commit and push from their worktree**:\\n   ```bash\\n   git add . \u0026\u0026 git commit -m \\\"Complete feature\\\"\\n   git push -u origin AGENTS-42\\n   ```\\n\\n4. **Cleanup after merge**:\\n   ```bash\\n   # From main repo, remove worktree after PR merged\\n   git worktree remove ../myapp-AGENTS-42\\n   ```\\n\\n### Listing and Managing Worktrees\\n\\n```bash\\ngit worktree list              # Show all worktrees\\ngit worktree remove \u003cpath\u003e     # Remove a worktree\\ngit worktree prune             # Clean up stale worktrees\\n```\\n\\n### Important Rules\\n- ‚úÖ Always create worktree from main repo directory\\n- ‚úÖ Use consistent naming: `../REPO-ISSUE-ID`\\n- ‚úÖ Each parallel agent gets its own worktree\\n- ‚úÖ Clean up worktrees after PRs are merged\\n- ‚ùå Never have multiple agents work in the same directory\\n- ‚ùå Don't delete worktrees with uncommitted changes\\n\\n---\\n\\n## Rule 9: Prefer Statically Typed Languages\\n\\n**When creating new projects, prefer statically typed languages like Go or Kotlin.**\\n\\n### Why Static Types?\\n- **Lego block assembly**: Types make code snap together cleanly‚Äîfunction signatures tell you exactly what goes in and what comes out\\n- **Agent-friendly**: AI agents can reason about type contracts without needing to trace through runtime behavior\\n- **Easier testing**: Type mismatches are caught at compile time, not in production\\n- **Self-documenting**: Types serve as inline documentation that stays in sync with the code\\n- **Refactoring confidence**: The compiler catches cascading changes across the codebase\\n\\n### Recommended Languages\\n- **Go**: Simple, fast compilation, excellent tooling, great for services and CLI tools\\n- **Kotlin**: Modern, expressive, excellent for JVM-based applications and Android\\n- **TypeScript**: When JavaScript ecosystem is required\\n- **Rust**: When memory safety and performance are critical\\n\\n### When Using Scripting Languages\\n\\nIf the project natively uses a scripting language (Python, JavaScript, Ruby, etc.), **always use types**:\\n\\n```python\\n# ‚úÖ GOOD - Python with type hints\\ndef process_user(user_id: int, options: ProcessOptions) -\u003e UserResult:\\n    ...\\n\\n# ‚ùå BAD - No types\\ndef process_user(user_id, options):\\n    ...\\n```\\n\\n```javascript\\n// ‚úÖ GOOD - Use TypeScript instead of JavaScript\\nfunction processUser(userId: number, options: ProcessOptions): UserResult {\\n    ...\\n}\\n\\n// ‚ùå BAD - Plain JavaScript without types\\nfunction processUser(userId, options) {\\n    ...\\n}\\n```\\n\\n### Type Coverage Requirements\\n- **New projects**: 100% type coverage from the start\\n- **Existing projects**: Add types to any code you modify\\n- **Use strict mode**: Enable strict type checking in compiler/linter settings\\n  - TypeScript: `\\\"strict\\\": true`\\n  - Python: Use `mypy --strict` or pyright strict mode\\n  - Go: Types are mandatory (built-in)\\n\\n### Benefits for AI Agents\\nWhen agents work with typed code:\\n- Function signatures provide clear contracts without reading implementation\\n- Autocomplete and suggestions are more accurate\\n- Errors are caught during code generation, not execution\\n- Refactoring across files is safer and more reliable\\n- Code review can focus on logic, not type mismatches\\n\\n---\\n\\n## Landing the Plane\\n\\n**When the user says \\\"let's land the plane\\\"**, follow this clean session-ending protocol:\\n\\n1. **File beads issues for any remaining work** that needs follow-up\\n2. **Ensure all quality gates pass** (only if code changes were made) - run tests, linters, builds (file P0 issues if broken)\\n3. **Update beads issues** - close finished work, update status\\n4. **Commit and push beads changes to active PR** - If working on a feature branch PR:\\n   - Commit any beads database updates: `git add .beads/ \u0026\u0026 git commit -m \\\"Update beads database\\\"`\\n   - Push to the PR branch: `git push`\\n   - This ensures beads state is preserved in the PR and synced with remote\\n5. **Sync with main if needed** - Only if switching back to main or reconciling:\\n   - Work methodically to ensure both local and remote issues merge safely\\n   - This may require pulling, handling conflicts, syncing the database\\n   - Be creative and patient - the goal is clean reconciliation where no issues are lost\\n6. **Clean up git state** - Clear old stashes and prune dead remote branches:\\n   ```bash\\n   git stash clear                    # Remove old stashes\\n   git remote prune origin            # Clean up deleted remote branches\\n   ```\\n7. **Verify clean state** - Ensure all changes are committed and pushed, no untracked files remain\\n8. **Choose a follow-up issue for next session**\\n   - Provide a prompt for the user to give to you in the next session\\n   - Format: \\\"Continue work on ISSUE-ID: [issue title]. [Brief context about what's been done and what's next]\\\"\\n\\n### Example \\\"Land the Plane\\\" Session\\n\\n```bash\\n# 1. File remaining work\\nbd create \\\"Add integration tests for sync\\\" -t task -p 2\\n\\n# 2. Run quality gates (only if code changes were made)\\nnpm test                # or: go test, pytest, etc.\\nnpm run lint            # or: golangci-lint run, etc.\\n\\n# 3. Close finished issues\\nbd close AGENTS-42 --reason \\\"Completed feature and tests passing\\\"\\n\\n# 4. Commit and push beads changes to active PR (if on feature branch)\\ngit add .beads/\\ngit commit -m \\\"Update beads database after closing AGENTS-42\\\"\\ngit push\\n\\n# 5. Sync with main if needed (only when switching branches or reconciling)\\n# Usually not needed during active PR work\\n# git checkout main \u0026\u0026 git pull\\n# Resolve any conflicts if needed\\n\\n# 6. Clean up git state\\ngit stash clear\\ngit remote prune origin\\n\\n# 7. Verify clean state\\ngit status\\n\\n# 8. Choose next work\\nbd ready\\nbd show AGENTS-44\\n```\\n\\n### Session Handoff Deliverables\\n\\n**Then provide the user with:**\\n\\n- Summary of what was completed this session\\n- What issues were filed for follow-up\\n- Status of quality gates (all passing / issues filed)\\n- Recommended prompt for next session\\n\\n**Example handoff message:**\\n\\n```\\n‚úÖ Session Complete\\n\\nCompleted this session:\\n- AGENTS-42: Implemented user authentication with JWT\\n- AGENTS-43: Added unit tests for auth middleware\\n\\nFollow-up issues filed:\\n- AGENTS-45: Add integration tests for auth flow (P2)\\n- AGENTS-46: Add password reset functionality (P3)\\n\\nQuality gates: ‚úÖ All tests passing, no lint errors\\n\\nRecommended prompt for next session:\\n\\\"please read and apply ../AGENTS/AGENTS.md\\n\\nContinue work on AGENTS-45: Add integration tests for auth flow.\\nThe auth middleware is complete and unit tested. Next step is to\\nadd integration tests covering the full login/logout flow.\\\"\\n```\\n\\n---\\n\\n## Pass the Baton\\n\\n**When the user says \\\"pass the baton\\\"**, execute the full \\\"Land the Plane\\\" protocol, then automatically spawn a new agent to continue the work.\\n\\n### How It Works\\n\\n1. **Execute all \\\"Land the Plane\\\" steps** (1-8 above)\\n2. **Build the continuation prompt** including:\\n   - Instructions to read and apply AGENTS.md\\n   - The recommended follow-up issue and context\\n   - Any critical information the next agent needs\\n3. **Spawn a new agent** using the Task tool with `subagent_type: \\\"general-purpose\\\"`\\n4. **Pass the baton** by sending the continuation prompt to the new agent\\n\\n### Implementation\\n\\nAfter completing \\\"Land the Plane\\\" steps 1-7, instead of just providing a recommended prompt:\\n\\n```\\n# Step 8 becomes: Spawn continuation agent\\n\\nUse the Task tool with:\\n- subagent_type: \\\"general-purpose\\\"\\n- prompt: The full continuation prompt (see format below)\\n```\\n\\n### Continuation Prompt Format\\n\\nThe prompt passed to the new agent should include:\\n\\n```\\nplease read and apply ../AGENTS/AGENTS.md\\n\\nContinue work on [ISSUE-ID]: [issue title].\\n\\n## Context from previous session\\n- What was completed: [summary]\\n- Current state: [branch name, PR status if any]\\n- Next steps: [specific actions to take]\\n\\n## Important notes\\n- [Any blockers, gotchas, or critical information]\\n- [Dependencies or related issues]\\n\\nBegin by running `bd show [ISSUE-ID]` to review the issue details.\\n```\\n\\n### Example \\\"Pass the Baton\\\" Flow\\n\\n```\\nUser: \\\"pass the baton\\\"\\n\\nAgent:\\n1. Files remaining work as beads\\n2. Runs quality gates\\n3. Closes finished issues\\n4. Commits and pushes beads changes\\n5. Cleans up git state\\n6. Verifies clean state\\n7. Identifies next issue (AGENTS-45)\\n8. Spawns new agent with prompt:\\n\\n   \\\"please read and apply ../AGENTS/AGENTS.md\\n\\n   Continue work on AGENTS-45: Add integration tests for auth flow.\\n\\n   ## Context from previous session\\n   - Completed: JWT auth middleware with unit tests (AGENTS-42, AGENTS-43)\\n   - Current state: On branch main, all PRs merged\\n   - Next steps: Create integration tests for login/logout endpoints\\n\\n   ## Important notes\\n   - Auth middleware is in src/middleware/auth.ts\\n   - Test utilities are in tests/helpers/\\n\\n   Begin by running `bd show AGENTS-45` to review the issue details.\\\"\\n```\\n\\n### When to Use\\n\\n- **\\\"pass the baton\\\"**: Auto-continue with new agent (no human intervention needed)\\n- **\\\"land the plane\\\"**: End session, provide prompt for human to start next session\\n\\n### Benefits\\n\\n- Enables continuous autonomous work across context window limits\\n- Preserves critical context between agent sessions\\n- Maintains workflow continuity without human copy-paste\\n- Each agent starts fresh with full context budget\\n\",\"exit_code\":0,\"status\":\"completed\"}}\n\n\n---\n\n### cursor-agent @ 2025-11-26 09:46:44\n(no response)\n\n---\n\n### claude @ 2025-11-26 09:46:44\n(no response)\n","status":"closed","priority":4,"issue_type":"task","created_at":"2025-11-26T09:42:13.77038-08:00","updated_at":"2025-11-26T09:46:58.548409-08:00","closed_at":"2025-11-26T09:46:58.548409-08:00","source_repo":"."}
{"id":"buckshot-s4r","content_hash":"8e92bdbc9fd2079e7ef448e16e10b9d11d8dc480d578880e08d3474c3cfe0429","title":"Initialize Go project structure","description":"Create Go module, directory structure, Makefile with test/build/lint targets. Structure: cmd/buckshot/, internal/agent/, internal/bead/, internal/dispatch/. Include go.mod, .gitignore, basic README.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-25T22:19:20.809462-08:00","updated_at":"2025-11-25T23:03:29.938723-08:00","closed_at":"2025-11-25T23:03:29.938723-08:00","source_repo":"."}
{"id":"buckshot-snh","content_hash":"01af52a0344fefc7494ab4a7c4868fe41e3c33d544ae1572f61bdbcaf04093d7","title":"RED: OutputParser interface tests","description":"Write failing tests for OutputParser interface in agent package. Interface: Parse(output string) string. Tests: verify interface exists, mock implementations work, noop parser returns input unchanged.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T09:49:57.37034-08:00","updated_at":"2025-11-26T09:56:21.249492-08:00","closed_at":"2025-11-26T09:56:21.249492-08:00","source_repo":"."}
{"id":"buckshot-t6t","content_hash":"fbb5aec6a7c33435ecd9d01fd8bea40a0636948687a7da991c475c3317bb171a","title":"RED: Write convergence detection tests","description":"TDD RED phase: Write failing tests for convergence detection. Test cases: 1) IsConverged(roundResults) returns true if ALL agents in round reported no changes, 2) Returns false if ANY agent made changes, 3) Tracks convergence across multiple rounds, 4) Configurable: require N consecutive 'no change' rounds for convergence, 5) Parse agent responses for 'complete'/'no changes' signals.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-25T22:51:54.03057-08:00","updated_at":"2025-11-26T05:19:33.308327-08:00","closed_at":"2025-11-26T05:19:33.308327-08:00","source_repo":".","dependencies":[{"issue_id":"buckshot-t6t","depends_on_id":"buckshot-g0f","type":"blocks","created_at":"2025-11-25T22:51:54.031081-08:00","created_by":"daemon"}]}
{"id":"buckshot-tww","content_hash":"b21462672843b527b1ee0a99ecaeef437d54ea4f414b429d18d3cfa45abe088e","title":"GREEN: Implement CLI","description":"TDD GREEN phase: Implement CLI using cobra. Commands: 'plan' (main), 'agents' (list). Plan command: 1) Detect available agents, 2) Start sessions with AGENTS.md path, 3) Run rounds (all agents per round), 4) Check convergence or round limit, 5) Manage session lifecycle (respawn if context \u003e 50%), 6) Display progress and final bead summary. This completes the MVP.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-25T22:20:26.441164-08:00","updated_at":"2025-11-26T05:27:40.790288-08:00","closed_at":"2025-11-26T05:27:40.790288-08:00","source_repo":".","dependencies":[{"issue_id":"buckshot-tww","depends_on_id":"buckshot-0y0","type":"blocks","created_at":"2025-11-25T22:20:26.441691-08:00","created_by":"daemon"}]}
{"id":"buckshot-vk6","content_hash":"c18642b996104cc105ac7347b286257a650c97e165504984501bffd046e1eb5d","title":"GREEN: Implement agent detection","description":"TDD GREEN phase: Implement agent detection to make tests pass. Functions: DetectAgents() []Agent, IsInstalled(name string) bool, IsAuthenticated(agent Agent) bool. Check PATH for claude, codex, cursor binaries. Verify auth by running lightweight command (--version or --help). Return Agent structs with name, path, authenticated status.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-25T22:19:33.19829-08:00","updated_at":"2025-11-25T23:16:02.377157-08:00","closed_at":"2025-11-25T23:16:02.377157-08:00","source_repo":".","dependencies":[{"issue_id":"buckshot-vk6","depends_on_id":"buckshot-e7d","type":"blocks","created_at":"2025-11-25T22:19:33.19881-08:00","created_by":"daemon"}]}
{"id":"buckshot-wu2","content_hash":"d029769672bd7063cb56515ece6fd0d738e61e1f0681c80fe5b16eb25ebf2143","title":"GREEN: Implement FeedbackContext builder","description":"Implement FeedbackContext builder that formats the comment-only prompt:\n- New FeedbackMode field in PlanningContext\n- FormatFeedback() method that generates comment-only prompt\n- Prompt template with agent name for --author flag\n- Instructions to use bd comment command only\n\nParent: buckshot-7ph\nDepends: buckshot-mzm","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-27T18:04:30.473584-08:00","updated_at":"2025-11-27T18:11:20.870136-08:00","closed_at":"2025-11-27T18:11:20.870136-08:00","source_repo":"."}
{"id":"buckshot-z1g","content_hash":"34c5a66640799adf9718dc9b2822e1bd9ef48a619d9ef1fa5eb259b73e89809d","title":"RED: Write results presentation tests","description":"TDD RED phase: Write failing tests for results presentation. Test cases: 1) Format multiple agent responses for terminal display, 2) Show agent name, duration, and response clearly separated, 3) Handle long responses (truncate or paginate), 4) Indicate errors/failures distinctly, 5) JSON output mode for piping.","status":"closed","priority":4,"issue_type":"task","created_at":"2025-11-25T22:20:11.280566-08:00","updated_at":"2025-11-26T09:10:41.707033-08:00","closed_at":"2025-11-26T09:10:41.707033-08:00","source_repo":".","dependencies":[{"issue_id":"buckshot-z1g","depends_on_id":"buckshot-5qe","type":"blocks","created_at":"2025-11-25T22:20:11.281044-08:00","created_by":"daemon"},{"issue_id":"buckshot-z1g","depends_on_id":"buckshot-byq","type":"blocks","created_at":"2025-11-25T22:26:09.512464-08:00","created_by":"daemon"}]}
